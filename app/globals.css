@import "tailwindcss";
@import "tw-animate-css";

/* 防止主题切换时的闪烁 */
html {
  transition: background-color 0.2s ease, color 0.2s ease;
}

/* 防止水平滚动 */
* {
  box-sizing: border-box;
}

html, body {
  overflow-x: hidden;
  max-width: 100vw;
  height: 100%;
  margin: 0;
  padding: 0;
}

/* 移动端视口修复 */
@supports (-webkit-touch-callout: none) {
  html, body {
    height: -webkit-fill-available;
  }
}

/* 移动端登录页面修复 */
@media (max-width: 768px) {
  /* 登录页面特定修复 */
  [data-page="signin"] {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    height: 100dvh;
    overflow: hidden;
  }
}

/* Dashboard 响应式优化 */
@media (max-width: 640px) {
  /* 移动端优化 */
  .dashboard-container {
    padding: 0.75rem;
  }

  /* Header 优化 - 减少小屏幕下的空白 */
  header {
    height: 3rem !important; /* 48px */
    min-height: 3rem !important;
    max-height: 3rem !important;
    width: 100% !important;
    max-width: 100vw !important;
    padding-left: 0.5rem !important;
    padding-right: 0.5rem !important;
    overflow-x: hidden !important;
  }

  /* 按钮间距优化 */
  .header-toolbar {
    gap: 0.25rem !important;
  }

  /* 隐藏 Sheet 关闭按钮 */
  [data-radix-dialog-content] > button[data-radix-dialog-close] {
    display: none !important;
  }

  /* 更通用的关闭按钮隐藏规则 */
  .sheet-content button[aria-label="Close"] {
    display: none !important;
  }

  /* 图表容器优化 */
  .recharts-wrapper {
    font-size: 0.75rem;
    width: 100% !important;
    height: 100% !important;
  }

  /* 确保ResponsiveContainer正确填充 */
  .recharts-responsive-container {
    width: 100% !important;
    height: 100% !important;
    min-height: 300px;
  }

  /* 图表文字优化 */
  .recharts-cartesian-axis-tick-value {
    font-size: 0.75rem !important;
  }

  .recharts-pie-label-text {
    font-size: 0.75rem !important;
  }

  /* 卡片间距优化 */
  .dashboard-grid {
    gap: 0.75rem;
  }

  /* 文字大小优化 */
  .dashboard-title {
    font-size: 1.5rem;
    line-height: 2rem;
  }

  .dashboard-subtitle {
    font-size: 0.875rem;
    line-height: 1.25rem;
  }

  /* 缺陷分布图特殊优化 */
  .defect-chart-container {
    overflow-x: auto;
  }

  /* 标签页按钮优化 */
  .tabs-trigger-mobile {
    padding: 0.5rem 0.25rem;
    font-size: 0.75rem;
  }
}

/* 平板端优化 */
@media (min-width: 641px) and (max-width: 1024px) {
  .dashboard-container {
    padding: 1rem;
  }

  .dashboard-grid {
    gap: 1rem;
  }

  .recharts-responsive-container {
    min-height: 250px;
  }

  /* Header 高度固定 */
  header {
    height: 3.5rem !important; /* 56px */
    min-height: 3.5rem !important;
    max-height: 3.5rem !important;
    width: 100% !important;
    max-width: 100vw !important;
    overflow-x: hidden !important;
  }
}

/* 桌面端优化 */
@media (min-width: 1025px) {
  .recharts-responsive-container {
    min-height: 300px;
  }

  /* Header 高度固定 */
  header {
    height: 4rem !important; /* 64px */
    min-height: 4rem !important;
    max-height: 4rem !important;
    width: 100% !important;
    max-width: 100vw !important;
    overflow-x: hidden !important;
  }
}

/* 大屏幕优化 */
@media (min-width: 1280px) {
  .recharts-responsive-container {
    min-height: 350px;
  }
}

/* 超大屏幕优化 */
@media (min-width: 1536px) {
  /* 设置合理的min-height，避免过高 */
  .recharts-responsive-container {
    min-height: 400px;
  }
}

/* Dashboard 卡片中的小图表特殊样式 */
.dashboard-card-chart .recharts-responsive-container {
  min-height: 120px !important;
  max-height: 140px !important;
}



/* Tailwind CSS v4 theme configuration */
@theme {
  --color-primary-50: #e3f2fd;
  --color-primary-100: #bbdefb;
  --color-primary-200: #90caf9;
  --color-primary-300: #64b5f6;
  --color-primary-400: #42a5f5;
  --color-primary-500: #1e88e5;
  --color-primary-600: #1976d2;
  --color-primary-700: #1565c0;
  --color-primary-800: #0d47a1;
  --color-primary-900: #0a2351;
  --color-primary: #1e88e5;
  --color-primary-foreground: #ffffff;

  --color-sidebar: #ffffff;
  --color-sidebar-foreground: #333333;
  --color-sidebar-border: transparent;
  --color-sidebar-accent: #f3f4f6;
  --color-sidebar-accent-foreground: #111827;
}

/* 确保 CSS 变量在构建时可用 */

/* 文本换行样式 */
.break-words {
  word-break: break-word;
  overflow-wrap: break-word;
}

.overflow-wrap-anywhere {
  overflow-wrap: anywhere;
}

/* 测试用例助手专用的文本换行样式 */
.testcase-assistant {
  word-break: break-all !important;
  overflow-wrap: anywhere !important;
  white-space: pre-wrap !important;
}

.testcase-assistant * {
  word-break: break-all !important;
  overflow-wrap: anywhere !important;
  white-space: pre-wrap !important;
  max-width: 100% !important;
  box-sizing: border-box !important;
}

/* 确保容器不会溢出 */
.testcase-assistant {
  overflow-x: hidden !important;
}

/* 覆盖最大宽度限制 */
.testcase-assistant .max-w-3xl {
  max-width: 100% !important;
}

/* 隐藏内部滚动条，避免双滚动条问题 */
.hide-scrollbar {
  -ms-overflow-style: none !important;  /* Internet Explorer 10+ */
  scrollbar-width: none !important;  /* Firefox */
}

.hide-scrollbar::-webkit-scrollbar {
  display: none !important;  /* Safari and Chrome */
  width: 0 !important;
  height: 0 !important;
}

.hide-scrollbar::-webkit-scrollbar-track {
  display: none !important;
}

.hide-scrollbar::-webkit-scrollbar-thumb {
  display: none !important;
}

/* test-case页面特定的滚动条隐藏 */
.test-case-content {
  overflow-y: auto;
  -ms-overflow-style: none !important;
  scrollbar-width: none !important;
}

.test-case-content::-webkit-scrollbar {
  display: none !important;
  width: 0 !important;
  height: 0 !important;
}

.test-case-content::-webkit-scrollbar-track {
  display: none !important;
}

.test-case-content::-webkit-scrollbar-thumb {
  display: none !important;
}

/* 强制隐藏test-case页面内的所有滚动条 */
.test-case-page * {
  scrollbar-width: none !important;
  -ms-overflow-style: none !important;
}

.test-case-page *::-webkit-scrollbar {
  display: none !important;
  width: 0 !important;
  height: 0 !important;
}

.test-case-page *::-webkit-scrollbar-track {
  display: none !important;
}

.test-case-page *::-webkit-scrollbar-thumb {
  display: none !important;
}

/* 只保留body级别的滚动条 */
.test-case-page {
  overflow-x: hidden !important;
}

/* 针对高放大倍数的特殊处理 */
@media (min-resolution: 150dpi), (min-resolution: 1.5dppx) {
  .test-case-page * {
    scrollbar-width: none !important;
    -ms-overflow-style: none !important;
  }

  .test-case-page *::-webkit-scrollbar {
    display: none !important;
    width: 0 !important;
    height: 0 !important;
    background: transparent !important;
  }

  .test-case-page *::-webkit-scrollbar-track {
    display: none !important;
    background: transparent !important;
  }

  .test-case-page *::-webkit-scrollbar-thumb {
    display: none !important;
    background: transparent !important;
  }

  .test-case-page *::-webkit-scrollbar-corner {
    display: none !important;
    background: transparent !important;
  }
}

/* 强制移除所有可能的滚动条 */
.no-scrollbar-anywhere {
  overflow: visible !important;
}

.no-scrollbar-anywhere * {
  overflow-x: visible !important;
  overflow-y: visible !important;
  scrollbar-width: none !important;
  -ms-overflow-style: none !important;
}

.no-scrollbar-anywhere *::-webkit-scrollbar {
  display: none !important;
  width: 0 !important;
  height: 0 !important;
}

/* 最强力的滚动条隐藏 - 适用于所有放大倍数 */
.force-no-scrollbar,
.force-no-scrollbar * {
  scrollbar-width: none !important;
  -ms-overflow-style: none !important;
  overflow-x: visible !important;
}

.force-no-scrollbar::-webkit-scrollbar,
.force-no-scrollbar *::-webkit-scrollbar {
  display: none !important;
  width: 0 !important;
  height: 0 !important;
  background: transparent !important;
}

.force-no-scrollbar::-webkit-scrollbar-track,
.force-no-scrollbar *::-webkit-scrollbar-track {
  display: none !important;
  background: transparent !important;
}

.force-no-scrollbar::-webkit-scrollbar-thumb,
.force-no-scrollbar *::-webkit-scrollbar-thumb {
  display: none !important;
  background: transparent !important;
}

.force-no-scrollbar::-webkit-scrollbar-corner,
.force-no-scrollbar *::-webkit-scrollbar-corner {
  display: none !important;
  background: transparent !important;
}

@custom-variant dark (&:is(.dark *));

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
  --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
  --color-sidebar-ring: var(--sidebar-ring);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar: var(--sidebar);
  --color-chart-5: var(--chart-5);
  --color-chart-4: var(--chart-4);
  --color-chart-3: var(--chart-3);
  --color-chart-2: var(--chart-2);
  --color-chart-1: var(--chart-1);
  --color-ring: var(--ring);
  --color-input: var(--input);
  --color-border: var(--border);
  --color-destructive: var(--destructive);
  --color-accent-foreground: var(--accent-foreground);
  --color-accent: var(--accent);
  --color-muted-foreground: var(--muted-foreground);
  --color-muted: var(--muted);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-secondary: var(--secondary);
  --color-primary-foreground: var(--primary-foreground);
  --color-primary: var(--primary);
  --color-popover-foreground: var(--popover-foreground);
  --color-popover: var(--popover);
  --color-card-foreground: var(--card-foreground);
  --color-card: var(--card);
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
}

:root {
  --radius: 0.625rem;
  --background: oklch(1 0 0);
  --foreground: oklch(0.145 0 0);
  --skeleton: oklch(0.9 0 0);
  --btn-border: oklch(0.914 0 0);
  --input: oklch(0.9 0 0);
  --card: oklch(1 0 0);
  --card-foreground: oklch(0.145 0 0);
  --popover: oklch(1 0 0);
  --popover-foreground: oklch(0.145 0 0);
  --primary: #1e88e5; /* 蓝色主题色 */
  --primary-foreground: #ffffff; /* 白色文本，在蓝色背景上 */
  --primary-80: rgba(30, 136, 229, 0.8);
  --primary-60: rgba(30, 136, 229, 0.6);
  --primary-40: rgba(30, 136, 229, 0.4);
  --primary-20: rgba(30, 136, 229, 0.2);
  --secondary: oklch(0.97 0 0);
  --secondary-foreground: oklch(0.205 0 0);
  --muted: oklch(0.97 0 0);
  --muted-foreground: oklch(0.556 0 0);
  --accent: oklch(0.97 0 0);
  --accent-foreground: oklch(0.205 0 0);
  --destructive: oklch(0.577 0.245 27.325);
  --border: oklch(0.922 0 0);
  --input: oklch(0.922 0 0);
  --ring: oklch(0.708 0 0);
  --sidebar: #ffffff; /* 白色侧边栏背景 */
  --sidebar-foreground: #333333; /* 深灰色文本 */
  --sidebar-primary: #1e88e5; /* 蓝色主题色 */
  --sidebar-primary-foreground: #ffffff; /* 白色文本 */
  --sidebar-accent: rgba(30, 136, 229, 0.1); /* 与hover:bg-primary/10一致的蓝色半透明 */
  --sidebar-accent-foreground: #1e88e5; /* 蓝色文本 */
  --sidebar-border: transparent; /* 透明边框 */
  --sidebar-ring: oklch(0.708 0 0);
  --chart-1: 0 84% 60%; /* 红色 - 新缺陷 */
  --chart-2: 142 71% 45%; /* 绿色 - 已修复缺陷 */
  --chart-3: 221 83% 53%; /* 蓝色 - 已关闭缺陷 */
  --chart-4: 38 92% 50%; /* 橙色 - 重新打开缺陷 */
  --chart-5: 262 83% 58%; /* 紫色 */
}

.dark {
  --background: oklch(0.145 0 0);
  --foreground: oklch(0.985 0 0);
  --skeleton: oklch(0.25 0 0);
  --btn-border: oklch(0.175 0 0);
  --input: oklch(0.16 0 0);
  --card: oklch(0.205 0 0);
  --card-foreground: oklch(0.985 0 0);
  --popover: oklch(0.205 0 0);
  --popover-foreground: oklch(0.985 0 0);
  --primary: #1565c0; /* 深蓝色主题色 */
  --primary-foreground: #ffffff; /* 白色文本 */
  --primary-80: rgba(21, 101, 192, 0.8);
  --primary-60: rgba(21, 101, 192, 0.6);
  --primary-40: rgba(21, 101, 192, 0.4);
  --primary-20: rgba(21, 101, 192, 0.2);
  --secondary: oklch(0.269 0 0);
  --secondary-foreground: oklch(0.985 0 0);
  --muted: oklch(0.269 0 0);
  --muted-foreground: oklch(0.708 0 0);
  --accent: oklch(0.269 0 0);
  --accent-foreground: oklch(0.985 0 0);
  --destructive: oklch(0.704 0.191 22.216);
  --border: oklch(1 0 0 / 10%);
  --input: oklch(1 0 0 / 15%);
  --ring: oklch(0.556 0 0);
  --chart-1: 0 84% 60%; /* 红色 - 新缺陷 */
  --chart-2: 142 76% 50%; /* 绿色 - 已修复缺陷 */
  --chart-3: 221 83% 53%; /* 蓝色 - 已关闭缺陷 */
  --chart-4: 38 92% 50%; /* 橙色 - 重新打开缺陷 */
  --chart-5: 262 83% 58%; /* 紫色 */
  --sidebar: #1a202c; /* 深色侧边栏背景 */
  --sidebar-foreground: #f7fafc; /* 浅色文本 */
  --sidebar-primary: #2196f3; /* 亮蓝色主题色 */
  --sidebar-primary-foreground: #ffffff; /* 白色文本 */
  --sidebar-accent: rgba(33, 150, 243, 0.1); /* 与hover:bg-primary/10一致的蓝色半透明 */
  --sidebar-accent-foreground: #2196f3; /* 蓝色文本 */
  --sidebar-border: transparent;
  --sidebar-ring: oklch(0.556 0 0);
}

.user-message-content {
  word-break: break-word;
  overflow-wrap: break-word;
  white-space: pre-wrap;
}

.user-message-content a {
  color: #fff !important;
  text-decoration: underline;
}
.user-message-content a:hover {
  color: #dbeafe !important;
}

/* 蓝色主题 */
.theme-blue {
  --background: #ffffff;
  --foreground: #020817;
  --muted: #f1f5f9;
  --muted-foreground: #64748b;
  --popover: #fff;
  --popover-foreground: #020817;
  --card: #fff;
  --card-foreground: #020817;
  --border: #e2e8f0;
  --input: #e2e8f0;
  --primary-50: #eff6ff;
  --primary-100: #dbeafe;
  --primary-200: #bfdbfe;
  --primary-300: #93c5fd;
  --primary-400: #60a5fa;
  --primary-500: #3b82f6;
  --primary-600: #2563eb;
  --primary-700: #1d4ed8;
  --primary-800: #1e40af;
  --primary-900: #1e3a8a;
  --primary-950: #172554;
  --primary: #2563eb;
  --primary-foreground: #f8fafc;
  --primary-80: rgba(37, 99, 235, 0.8);
  --primary-60: rgba(37, 99, 235, 0.6);
  --primary-40: rgba(37, 99, 235, 0.4);
  --primary-20: rgba(37, 99, 235, 0.2);
  --secondary: #f1f5f9;
  --secondary-foreground: #0f172a;
  --accent: #f1f5f9;
  --accent-foreground: #0f172a;
  --destructive: #ef4444;
  --destructive-foreground: #f8fafc;
  --ring: #2563eb;
  --default-50: #f8fafc;
  --default-100: #f1f5f9;
  --default-200: #e2e8f0;
  --default-300: #cbd5e1;
  --default-400: #94a3b8;
  --default-500: #64748b;
  --default-600: #475569;
  --default-700: #334155;
  --default-800: #1e293b;
  --default-900: #0f172a;
  --default-950: #020817;
  --sidebar: #ffffff;
  --sidebar-foreground: #334155;
  --sidebar-primary: #2563eb;
  --sidebar-primary-foreground: #ffffff;
  --sidebar-accent: rgba(37, 99, 235, 0.1);
  --sidebar-accent-foreground: #2563eb;
  --sidebar-border: transparent;
  --sidebar-ring: #2563eb;
}

/* 绿色主题 */
.theme-green {
  --background: #ffffff;
  --foreground: #020817;
  --muted: #f0fdf4;
  --muted-foreground: #64748b;
  --popover: #fff;
  --popover-foreground: #020817;
  --card: #fff;
  --card-foreground: #020817;
  --border: #dcfce7;
  --input: #dcfce7;
  --primary: #16a34a;
  --primary-foreground: #f0fdf4;
  --primary-80: rgba(22, 163, 74, 0.8);
  --primary-60: rgba(22, 163, 74, 0.6);
  --primary-40: rgba(22, 163, 74, 0.4);
  --primary-20: rgba(22, 163, 74, 0.2);
  --secondary: #f0fdf4;
  --secondary-foreground: #0f172a;
  --accent: #f0fdf4;
  --accent-foreground: #0f172a;
  --destructive: #ef4444;
  --destructive-foreground: #f8fafc;
  --ring: #16a34a;
  --sidebar: #ffffff;
  --sidebar-foreground: #334155;
  --sidebar-primary: #16a34a;
  --sidebar-primary-foreground: #ffffff;
  --sidebar-accent: rgba(22, 163, 74, 0.1);
  --sidebar-accent-foreground: #16a34a;
  --sidebar-border: transparent;
  --sidebar-ring: #16a34a;
}

/* 紫色主题 */
.theme-purple {
  --background: #ffffff;
  --foreground: #020817;
  --muted: #faf5ff;
  --muted-foreground: #64748b;
  --popover: #fff;
  --popover-foreground: #020817;
  --card: #fff;
  --card-foreground: #020817;
  --border: #e9d5ff;
  --input: #e9d5ff;
  --primary: #9333ea;
  --primary-foreground: #faf5ff;
  --primary-80: rgba(147, 51, 234, 0.8);
  --primary-60: rgba(147, 51, 234, 0.6);
  --primary-40: rgba(147, 51, 234, 0.4);
  --primary-20: rgba(147, 51, 234, 0.2);
  --secondary: #faf5ff;
  --secondary-foreground: #0f172a;
  --accent: #faf5ff;
  --accent-foreground: #0f172a;
  --destructive: #ef4444;
  --destructive-foreground: #f8fafc;
  --ring: #9333ea;
  --sidebar: #ffffff;
  --sidebar-foreground: #334155;
  --sidebar-primary: #9333ea;
  --sidebar-primary-foreground: #ffffff;
  --sidebar-accent: rgba(147, 51, 234, 0.1);
  --sidebar-accent-foreground: #9333ea;
  --sidebar-border: transparent;
  --sidebar-ring: #9333ea;
}

/* 橙色主题 */
.theme-orange {
  --background: #ffffff;
  --foreground: #020817;
  --muted: #fff7ed;
  --muted-foreground: #64748b;
  --popover: #fff;
  --popover-foreground: #020817;
  --card: #fff;
  --card-foreground: #020817;
  --border: #fed7aa;
  --input: #fed7aa;
  --primary: #ea580c;
  --primary-foreground: #fff7ed;
  --primary-80: rgba(234, 88, 12, 0.8);
  --primary-60: rgba(234, 88, 12, 0.6);
  --primary-40: rgba(234, 88, 12, 0.4);
  --primary-20: rgba(234, 88, 12, 0.2);
  --secondary: #fff7ed;
  --secondary-foreground: #0f172a;
  --accent: #fff7ed;
  --accent-foreground: #0f172a;
  --destructive: #ef4444;
  --destructive-foreground: #f8fafc;
  --ring: #ea580c;
  --sidebar: #ffffff;
  --sidebar-foreground: #334155;
  --sidebar-primary: #ea580c;
  --sidebar-primary-foreground: #ffffff;
  --sidebar-accent: rgba(234, 88, 12, 0.1);
  --sidebar-accent-foreground: #ea580c;
  --sidebar-border: transparent;
  --sidebar-ring: #ea580c;
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground;
  }
}

@layer components {
  .g-button {
    border-radius: var(--radius);
    border: 1px solid;
    border-color: var(--btn-border);
  }
}

/* 动画定义 */
@keyframes ripple {
  0%, 100% {
    transform: translate(-50%, -50%) scale(1);
    opacity: 1;
  }
  50% {
    transform: translate(-50%, -50%) scale(1.1);
    opacity: 0.6;
  }
}

@keyframes orbit {
  0% {
    transform: rotate(0deg) translateY(calc(var(--radius) * 1px)) rotate(0deg);
  }
  100% {
    transform: rotate(360deg) translateY(calc(var(--radius) * 1px)) rotate(-360deg);
  }
}

/* 动画类 */
.animate-ripple {
  animation-name: ripple;
  animation-duration: 2s;
  animation-timing-function: ease-in-out;
  animation-iteration-count: infinite;
}

.animate-orbit {
  animation-name: orbit;
  animation-duration: calc(var(--duration, 20) * 1s);
  animation-timing-function: linear;
  animation-iteration-count: infinite;
}



/* 强制移除项目选择器的hover效果 */
@layer utilities {
  .no-hover-effect:hover {
    background-color: transparent !important;
    color: currentColor !important;
  }

  /* 确保图标使用主题色 */
  .force-primary-color {
    color: var(--primary) !important;
  }

  /* 左侧垂直菜单强烈阴影效果 - 像header一样突出 */
  .sidebar-shadow {
    box-shadow:
      0 0 0 1px rgba(0, 0, 0, 0.05),
      2px 0 10px rgba(0, 0, 0, 0.1),
      4px 0 20px rgba(0, 0, 0, 0.08),
      8px 0 40px rgba(0, 0, 0, 0.05) !important;
    backdrop-filter: blur(8px) !important;
    -webkit-backdrop-filter: blur(8px) !important;
  }

  /* 深色模式下的强烈阴影效果 */
  .dark .sidebar-shadow {
    box-shadow:
      0 0 0 1px rgba(255, 255, 255, 0.1),
      2px 0 10px rgba(0, 0, 0, 0.4),
      4px 0 20px rgba(0, 0, 0, 0.3),
      8px 0 40px rgba(0, 0, 0, 0.2) !important;
    backdrop-filter: blur(8px) !important;
    -webkit-backdrop-filter: blur(8px) !important;
  }

  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
}

/* 主题深色模式支持 */

/* 蓝色主题深色模式 */
.dark.theme-blue {
  --background: oklch(0.145 0 0);
  --foreground: oklch(0.985 0 0);
  --card: oklch(0.205 0 0);
  --card-foreground: oklch(0.985 0 0);
  --popover: oklch(0.205 0 0);
  --popover-foreground: oklch(0.985 0 0);
  --primary: #3b82f6; /* 亮蓝色 */
  --primary-foreground: #ffffff;
  --primary-80: rgba(59, 130, 246, 0.8);
  --primary-60: rgba(59, 130, 246, 0.6);
  --primary-40: rgba(59, 130, 246, 0.4);
  --primary-20: rgba(59, 130, 246, 0.2);
  --secondary: oklch(0.269 0 0);
  --secondary-foreground: oklch(0.985 0 0);
  --muted: oklch(0.269 0 0);
  --muted-foreground: oklch(0.708 0 0);
  --accent: oklch(0.269 0 0);
  --accent-foreground: oklch(0.985 0 0);
  --destructive: oklch(0.704 0.191 22.216);
  --border: oklch(1 0 0 / 10%);
  --input: oklch(1 0 0 / 15%);
  --ring: oklch(0.556 0 0);
  --sidebar: #1a202c;
  --sidebar-foreground: #f7fafc;
  --sidebar-primary: #3b82f6;
  --sidebar-primary-foreground: #ffffff;
  --sidebar-accent: rgba(59, 130, 246, 0.1);
  --sidebar-accent-foreground: #3b82f6;
  --sidebar-border: transparent;
  --sidebar-ring: oklch(0.556 0 0);
}

/* 绿色主题深色模式 */
.dark.theme-green {
  --background: oklch(0.145 0 0);
  --foreground: oklch(0.985 0 0);
  --card: oklch(0.205 0 0);
  --card-foreground: oklch(0.985 0 0);
  --popover: oklch(0.205 0 0);
  --popover-foreground: oklch(0.985 0 0);
  --primary: #22c55e; /* 亮绿色 */
  --primary-foreground: #ffffff;
  --primary-80: rgba(34, 197, 94, 0.8);
  --primary-60: rgba(34, 197, 94, 0.6);
  --primary-40: rgba(34, 197, 94, 0.4);
  --primary-20: rgba(34, 197, 94, 0.2);
  --secondary: oklch(0.269 0 0);
  --secondary-foreground: oklch(0.985 0 0);
  --muted: oklch(0.269 0 0);
  --muted-foreground: oklch(0.708 0 0);
  --accent: oklch(0.269 0 0);
  --accent-foreground: oklch(0.985 0 0);
  --destructive: oklch(0.704 0.191 22.216);
  --border: oklch(1 0 0 / 10%);
  --input: oklch(1 0 0 / 15%);
  --ring: oklch(0.556 0 0);
  --sidebar: #1a202c;
  --sidebar-foreground: #f7fafc;
  --sidebar-primary: #22c55e;
  --sidebar-primary-foreground: #ffffff;
  --sidebar-accent: rgba(34, 197, 94, 0.1);
  --sidebar-accent-foreground: #22c55e;
  --sidebar-border: transparent;
  --sidebar-ring: oklch(0.556 0 0);
}

/* 紫色主题深色模式 */
.dark.theme-purple {
  --background: oklch(0.145 0 0);
  --foreground: oklch(0.985 0 0);
  --card: oklch(0.205 0 0);
  --card-foreground: oklch(0.985 0 0);
  --popover: oklch(0.205 0 0);
  --popover-foreground: oklch(0.985 0 0);
  --primary: #a855f7; /* 亮紫色 */
  --primary-foreground: #ffffff;
  --primary-80: rgba(168, 85, 247, 0.8);
  --primary-60: rgba(168, 85, 247, 0.6);
  --primary-40: rgba(168, 85, 247, 0.4);
  --primary-20: rgba(168, 85, 247, 0.2);
  --secondary: oklch(0.269 0 0);
  --secondary-foreground: oklch(0.985 0 0);
  --muted: oklch(0.269 0 0);
  --muted-foreground: oklch(0.708 0 0);
  --accent: oklch(0.269 0 0);
  --accent-foreground: oklch(0.985 0 0);
  --destructive: oklch(0.704 0.191 22.216);
  --border: oklch(1 0 0 / 10%);
  --input: oklch(1 0 0 / 15%);
  --ring: oklch(0.556 0 0);
  --sidebar: #1a202c;
  --sidebar-foreground: #f7fafc;
  --sidebar-primary: #a855f7;
  --sidebar-primary-foreground: #ffffff;
  --sidebar-accent: rgba(168, 85, 247, 0.1);
  --sidebar-accent-foreground: #a855f7;
  --sidebar-border: transparent;
  --sidebar-ring: oklch(0.556 0 0);
}

/* 橙色主题深色模式 */
.dark.theme-orange {
  --background: oklch(0.145 0 0);
  --foreground: oklch(0.985 0 0);
  --card: oklch(0.205 0 0);
  --card-foreground: oklch(0.985 0 0);
  --popover: oklch(0.205 0 0);
  --popover-foreground: oklch(0.985 0 0);
  --primary: #f97316; /* 亮橙色 */
  --primary-foreground: #ffffff;
  --primary-80: rgba(249, 115, 22, 0.8);
  --primary-60: rgba(249, 115, 22, 0.6);
  --primary-40: rgba(249, 115, 22, 0.4);
  --primary-20: rgba(249, 115, 22, 0.2);
  --secondary: oklch(0.269 0 0);
  --secondary-foreground: oklch(0.985 0 0);
  --muted: oklch(0.269 0 0);
  --muted-foreground: oklch(0.708 0 0);
  --accent: oklch(0.269 0 0);
  --accent-foreground: oklch(0.985 0 0);
  --destructive: oklch(0.704 0.191 22.216);
  --border: oklch(1 0 0 / 10%);
  --input: oklch(1 0 0 / 15%);
  --ring: oklch(0.556 0 0);
  --sidebar: #1a202c;
  --sidebar-foreground: #f7fafc;
  --sidebar-primary: #f97316;
  --sidebar-primary-foreground: #ffffff;
  --sidebar-accent: rgba(249, 115, 22, 0.1);
  --sidebar-accent-foreground: #f97316;
  --sidebar-border: transparent;
  --sidebar-ring: oklch(0.556 0 0);
}

/* React Data Grid Dark Mode Support */
.dark .rdg {
  --rdg-color: rgb(244 244 245);
  --rdg-border-color: rgb(63 63 70);
  --rdg-summary-border-color: rgb(63 63 70);
  --rdg-background-color: rgb(24 24 27);
  --rdg-header-background-color: rgb(39 39 42);
  --rdg-header-draggable-background-color: rgb(63 63 70);
  --rdg-row-hover-background-color: rgb(39 39 42);
  --rdg-row-selected-background-color: rgb(63 63 70);
  --rdg-row-selected-hover-background-color: rgb(82 82 91);
  --rdg-checkbox-color: rgb(244 244 245);
  --rdg-checkbox-focus-color: rgb(59 130 246);
  --rdg-checkbox-disabled-border-color: rgb(113 113 122);
  --rdg-checkbox-disabled-background-color: rgb(63 63 70);
  --rdg-selection-color: rgb(59 130 246);
  --rdg-font-size: 14px;
}

.rdg-dark {
  color-scheme: dark;
}

/* Dataset Preview Dialog Custom Width */
[data-radix-dialog-content] {
  width: 60vw !important;
  max-width: none !important;
}

/* Specific override for dataset preview dialog */
.dataset-preview-dialog [data-radix-dialog-content] {
  width: 60vw !important;
  max-width: none !important;
  min-width: 800px !important;
}

/* New Chat Button Enhancements */
.new-chat-button {
  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-80) 100%);
  position: relative;
  overflow: hidden;
}

.new-chat-button::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.15), transparent);
  transition: left 0.3s;
}

.new-chat-button:hover::before {
  left: 100%;
}

.new-chat-button:active {
  transform: scale(0.97);
}

/* Minimal Tiptap Editor 标题样式强制覆盖 */
.minimal-tiptap-editor .ProseMirror h1,
.minimal-tiptap-editor .ProseMirror h1.heading-node {
  font-size: 1.875rem !important; /* 30px */
  font-weight: 700 !important;
  margin-top: 2rem !important;
  margin-bottom: 1rem !important;
  line-height: 2.25rem !important;
}

.minimal-tiptap-editor .ProseMirror h2,
.minimal-tiptap-editor .ProseMirror h2.heading-node {
  font-size: 1.5rem !important; /* 24px */
  font-weight: 700 !important;
  margin-top: 1.5rem !important;
  margin-bottom: 0.875rem !important;
  line-height: 2rem !important;
}

.minimal-tiptap-editor .ProseMirror h3,
.minimal-tiptap-editor .ProseMirror h3.heading-node {
  font-size: 1.25rem !important; /* 20px */
  font-weight: 600 !important;
  margin-top: 1.25rem !important;
  margin-bottom: 0.75rem !important;
  line-height: 1.75rem !important;
}

.minimal-tiptap-editor .ProseMirror h4,
.minimal-tiptap-editor .ProseMirror h4.heading-node {
  font-size: 1.125rem !important; /* 18px */
  font-weight: 600 !important;
  margin-top: 1rem !important;
  margin-bottom: 0.5rem !important;
  line-height: 1.75rem !important;
}

/* 步骤查看模式的标题样式（使用 dangerouslySetInnerHTML 渲染） */
/* 使用具体的类名前缀避免影响其他组件 */
.test-case-step-content h1,
.text-slate-800.test-case-step-view h1,
.text-slate-700.test-case-step-view h1 {
  font-size: 1.875rem !important; /* 30px */
  font-weight: 700 !important;
  margin-top: 1rem !important;
  margin-bottom: 0.75rem !important;
  line-height: 2.25rem !important;
}

.test-case-step-content h2,
.text-slate-800.test-case-step-view h2,
.text-slate-700.test-case-step-view h2 {
  font-size: 1.5rem !important; /* 24px */
  font-weight: 700 !important;
  margin-top: 1rem !important;
  margin-bottom: 0.75rem !important;
  line-height: 2rem !important;
}

.test-case-step-content h3,
.text-slate-800.test-case-step-view h3,
.text-slate-700.test-case-step-view h3 {
  font-size: 1.25rem !important; /* 20px */
  font-weight: 600 !important;
  margin-top: 1rem !important;
  margin-bottom: 0.5rem !important;
  line-height: 1.75rem !important;
}
